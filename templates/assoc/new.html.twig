{% extends 'base.html.twig' %}

{% block title %}New Assoc{% endblock %}

{% block body %}
    <h1 class="text-center m-5">Créer une association</h1>
    {{ form_start(form) }}
    <div class="float-right flex-column d-flex flex-column">
        <button class=" btn btn-dark"><a href="{{ path('menu_index') }}">Retour à la liste</a></button>
        <button class=" btn btn-success btn-rounded mr-2">Sauvegarder</button>

    </div>
    <div class="container">
        <div class="row">
            <div class="col-6">
                {{ form_row(form.type) }}
                {{ form_row(form.product) }}
                {{ form_row(form.quantity) }}
                {{ form_row(form.description) }}
                {{ form_row(form.composition) }}
                {{ form_row(form.allergens) }}
            </div>
            <div class="col-6">
                {{ form_row(form.image) }}
                <img id="preview" style="display:none" width="300" height="300">
                
                {{ form_row(form.prices) }}
            </div>
        </div>
    </div>
     {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
    <script src ="{{ (asset('asset/js/assoc.js')) }}" type="text/javascript"></script>
    <script>
        var product = document.getElementById('assoc_product');
        var type = document.getElementById('assoc_type');
        var hiddenField = [type.options[type.selectedIndex].text,product.options[product.selectedIndex].text];
        var inputAlt = document.getElementById('assoc_image_alt');
        inputAlt.value = hiddenField.join(' ');

        type.onchange = function() {
            hiddenField[0] = type.options[type.selectedIndex].text;
            inputAlt.value = hiddenField.join(' ')
        };
        product.onchange = function() {
            hiddenField[1] = product.options[product.selectedIndex].text;
            inputAlt.value = hiddenField.join(' ')
        };

        $(document).ready(function(){
            $('#assoc_forMenu').val('0');
            addPriceFrom($('#assoc_prices'), $newPrice);

            })
    </script>
{% endblock %}
